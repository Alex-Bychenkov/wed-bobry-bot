# Поведение автоудаления сообщений

## Таблица времени удаления

| Тип сообщения | Время удаления | Требует прав администратора |
|---------------|----------------|----------------------------|
| Команда `/start` | 3 сек | ✅ Да (сообщение пользователя) |
| Команда `/status` | 3 сек | ✅ Да (сообщение пользователя) |
| Команда `/reset` | 3 сек | ✅ Да (сообщение пользователя) |
| Команда `/close` | 3 сек | ✅ Да (сообщение пользователя) |
| Сообщение с кнопками выбора статуса | При следующем `/start` | ❌ Нет (свое сообщение бота) |
| "Сессия сброшена" | 3 сек | ❌ Нет (свое сообщение бота) |
| "Сессия закрыта" | 3 сек | ❌ Нет (свое сообщение бота) |
| "Фамилия сохранена и статус обновлен" | 3 сек | ❌ Нет (свое сообщение бота) |
| "✅ Участник добавлен в список" | 3 сек | ❌ Нет (свое сообщение бота) |
| Сообщение пользователя с фамилией | 3 сек | ✅ Да (сообщение пользователя) |
| "Пожалуйста, отправь свою фамилию" | 15 сек | ❌ Нет (свое сообщение бота) |
| "Введите фамилию участника..." (гость) | 15 сек | ❌ Нет (свое сообщение бота) |
| Список участников (после `/status`) | Постоянно (обновляется) | ❌ Нет (свое сообщение бота) |

## Логика работы сообщения с кнопками

**Старое поведение (было проблемой):**
- При вызове `/start` создавалось сообщение с кнопками
- Это сообщение автоматически удалялось через 3 секунды
- При повторном `/start` создавалось новое сообщение
- Результат: пользователи не успевали нажать кнопки

**Новое поведение (исправлено):**
1. При первом вызове `/start` создается сообщение с кнопками
2. Это сообщение **остается в чате** и не удаляется автоматически
3. При повторном вызове `/start`:
   - Старое сообщение с кнопками **удаляется**
   - Создается новое сообщение с кнопками
   - Новое сообщение остается доступным
4. Результат: в чате всегда есть только одно актуальное сообщение с кнопками

## Зачем нужны права администратора?

### Что бот может удалять БЕЗ прав администратора:
- ✅ Только свои собственные сообщения

### Что бот может удалять С правами администратора:
- ✅ Свои сообщения
- ✅ Сообщения пользователей (команды, фамилии и т.д.)

### Последствия отсутствия прав:
- Команды пользователей `/start`, `/status`, `/reset`, `/close` останутся в чате
- Сообщения с фамилиями останутся в чате
- Чат будет захламлен служебными сообщениями
- Основной функционал бота будет работать, но чат будет неопрятным

## Инструкция по настройке

См. подробную инструкцию в файле [BOT_ADMIN_SETUP.md](BOT_ADMIN_SETUP.md)
